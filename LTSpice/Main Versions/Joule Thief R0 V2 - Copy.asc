Version 4
SHEET 1 1456 680
WIRE 608 -256 416 -256
WIRE -16 -240 -128 -240
WIRE -16 -224 -16 -240
WIRE 416 -208 416 -256
WIRE 608 -192 608 -256
WIRE 608 -192 544 -192
WIRE 672 -192 608 -192
WIRE 544 -160 544 -192
WIRE 672 -160 672 -192
WIRE -16 -112 -16 -144
WIRE 416 -96 416 -128
WIRE -128 -64 -128 -240
WIRE -192 -16 -464 -16
WIRE -464 32 -464 -16
WIRE -128 48 -128 32
WIRE 544 96 544 -80
WIRE -464 144 -464 112
WIRE -128 144 -128 128
WIRE 672 144 672 -80
WIRE 928 144 672 144
WIRE 672 176 672 144
WIRE 928 192 928 144
WIRE 544 224 544 176
WIRE 544 224 512 224
WIRE 608 224 544 224
WIRE 672 368 672 272
WIRE 848 368 672 368
WIRE 928 368 928 256
WIRE 928 368 848 368
WIRE 848 384 848 368
FLAG -16 -112 0
FLAG -464 144 0
FLAG -128 144 0
FLAG 416 -96 0
FLAG 512 224 Vbe
FLAG 848 384 0
FLAG 928 144 VOUT
SYMBOL pnp -192 32 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL voltage -16 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2
SYMBOL voltage -464 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1
SYMBOL res -144 32 R0
WINDOW 0 31 40 Left 2
WINDOW 3 31 76 Left 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 528 80 R0
WINDOW 0 31 40 Left 2
WINDOW 3 31 76 Left 2
SYMATTR InstName R1
SYMATTR Value 500
SYMBOL npn 608 176 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL LED 912 192 R0
SYMATTR InstName D1
SYMATTR Value NSPW500BS
SYMBOL voltage 416 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {Vbatt}
SYMBOL ind2 528 -176 R0
WINDOW 3 34 67 Left 2
SYMATTR Value {Lxf}
SYMATTR InstName Lp
SYMBOL ind2 688 -64 R180
WINDOW 0 36 80 Left 2
WINDOW 3 32 14 Left 2
SYMATTR InstName Ls
SYMATTR Value {Lxf}
TEXT 696 -152 Left 2 !K1 Lp Ls 0.98
TEXT 1024 -368 Left 2 !.param Lxf = 100u
TEXT 1016 -352 Left 2 !;.step dec param Lxf 1u 1m 3
TEXT 1024 -128 Left 2 !.meas TRAN AvgPwr AVG (V(VOUT)*I(D1))
TEXT 1024 -152 Left 2 !.meas Toroid param Lxf
TEXT 1016 -56 Left 2 !.MEAS TRAN TPERIOD1 WHEN V(OUT)=0.5 RISE=1
TEXT 1016 -32 Left 2 !.MEAS TRAN TPERIOD2 WHEN V(VOUT)=0.5 RISE=2
TEXT 1016 -8 Left 2 !.MEAS TRAN FREQ PARAM 1/(TPERIOD2-TPERIOD1)
TEXT 1024 -104 Left 2 !.meas TRAN AvgLoss AVG (V(VOUT)*Ie(Q1))
TEXT 1016 -288 Left 2 !.param Vbatt = 1V
TEXT 1016 -264 Left 2 !.step param Vbatt 0.1 1.0 0.1
TEXT 1016 -240 Left 2 !.meas tran Battery param Vbatt
TEXT 432 -288 Left 2 !.tran 0 250u 0 10n
TEXT 1024 56 Left 2 !.meas TRAN IBase PARAM I(R1)
TEXT 1024 80 Left 2 !.meas tran V_BE param V(Vbe)
