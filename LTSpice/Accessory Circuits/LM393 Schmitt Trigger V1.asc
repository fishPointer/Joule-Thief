Version 4
SHEET 1 1092 680
WIRE 480 -224 32 -224
WIRE 608 -224 480 -224
WIRE 480 -192 480 -224
WIRE 512 -192 480 -192
WIRE 608 -176 608 -224
WIRE 608 -176 576 -176
WIRE 512 -160 480 -160
WIRE 368 -64 352 -64
WIRE 480 -64 480 -160
WIRE 480 -64 448 -64
WIRE 624 -64 480 -64
WIRE 848 -64 720 -64
WIRE 480 -32 480 -64
WIRE 848 -32 848 -64
WIRE 352 -16 352 -64
WIRE 32 48 32 -224
WIRE 480 48 480 32
WIRE 176 80 144 80
WIRE 848 80 848 48
WIRE 144 112 144 80
WIRE 112 128 32 128
WIRE 208 144 176 144
WIRE 640 144 640 -16
WIRE 640 144 208 144
WIRE 112 160 -80 160
WIRE 144 192 144 176
WIRE -288 208 -320 208
WIRE -320 240 -320 208
WIRE -208 240 -320 240
WIRE -80 240 -80 160
WIRE -80 240 -128 240
WIRE -32 240 -80 240
WIRE 208 240 208 144
WIRE 208 240 48 240
WIRE -320 272 -320 240
WIRE -320 384 -320 352
FLAG -320 384 0
FLAG 144 192 0
FLAG 848 80 0
FLAG 480 48 0
FLAG 352 -16 0
FLAG 176 80 VCC
FLAG -288 208 VCC
SYMBOL Comparator\\lm393 144 144 R0
SYMATTR InstName U1
SYMBOL res 48 144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rs
SYMATTR Value 5k
SYMBOL res -112 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 64 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 30k
SYMBOL voltage -320 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 4.2
SYMBOL res 832 -48 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL pmos 720 -16 M270
SYMATTR InstName M2
SYMATTR Value AO6407
SYMBOL polcap 464 -32 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 1000µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=10 Irms=520m Rser=0.112 Lser=22.8n mfg="Würth Elektronik" pn="860020275015 WCAP-ATG5 10x12,5" type="Al electrolytic"
SYMBOL opamp 544 -240 R0
SYMATTR InstName U2
SYMBOL current 368 -64 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 0.01
TEXT -408 408 Left 2 !.tran 2 startup
TEXT -192 360 Left 2 !.param Rp =(R1/R2)
TEXT -192 312 Left 2 !.param R1=10k
TEXT -192 336 Left 2 !.param R2=3.3k
TEXT 208 -128 Left 2 ;BATTERY EXTRACTION MODULE
TEXT 400 -248 Left 2 ;SAMPLING CAPACITOR VOLTAGE
TEXT -312 128 Left 2 ;FEEDING BACK INTO SCHMITT TRIGGER
TEXT -376 168 Left 2 ;SET SCHMITT TRIGGERS AT 1V, 4V
TEXT 288 128 Left 2 ;SCHMITT OUTPUT TOGGLES PMOS SWITCH
TEXT 856 -64 Left 2 ;BMS HANDLES PULSE
RECTANGLE Normal 1088 -304 -448 448 2
