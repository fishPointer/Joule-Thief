Version 4
SHEET 1 1896 976
WIRE 736 0 688 0
WIRE 864 0 800 0
WIRE 992 0 944 0
WIRE -144 48 -256 48
WIRE -48 48 -144 48
WIRE 48 48 -48 48
WIRE 192 48 48 48
WIRE 576 48 432 48
WIRE 688 48 688 0
WIRE 688 48 576 48
WIRE 992 48 992 0
WIRE 1056 48 992 48
WIRE -144 64 -144 48
WIRE 48 80 48 48
WIRE 80 80 48 80
WIRE 432 80 432 48
WIRE 688 96 688 48
WIRE 736 96 688 96
WIRE 864 96 800 96
WIRE 992 96 992 48
WIRE 992 96 944 96
WIRE 576 112 576 48
WIRE 576 112 528 112
WIRE 624 112 576 112
WIRE -256 128 -256 48
WIRE -48 128 -48 48
WIRE 192 128 192 48
WIRE 1056 128 1056 48
WIRE 48 144 48 80
WIRE 624 144 624 112
WIRE -144 176 -144 128
WIRE 432 192 432 160
WIRE 432 192 400 192
WIRE 528 208 528 112
WIRE 432 256 432 192
WIRE 624 256 624 208
WIRE 1056 256 1056 208
WIRE -256 288 -256 192
WIRE -144 288 -144 256
WIRE -144 288 -256 288
WIRE -48 288 -48 208
WIRE -48 288 -144 288
WIRE 48 288 48 208
WIRE 48 288 -48 288
WIRE 48 320 48 288
WIRE 192 320 192 208
WIRE 528 384 528 272
WIRE 624 384 624 336
WIRE 624 384 528 384
WIRE 432 400 432 336
WIRE 624 432 624 384
FLAG 48 320 0
FLAG 80 80 vsoc
FLAG 432 400 0
FLAG 400 192 vbatt
FLAG 624 432 0
FLAG 192 320 0
FLAG 1056 256 0
SYMBOL cap 32 144 R0
SYMATTR InstName CAP
SYMATTR Value 100 IC=5
SYMATTR SpiceLine V=100
SYMBOL diode -160 64 R0
SYMATTR InstName D1
SYMBOL voltage -144 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 100
SYMBOL diode -240 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL res -64 112 R0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL bv 432 240 M0
SYMATTR InstName BATT
SYMATTR Value V=vbatt(V(vsoc))
SYMBOL current 1056 208 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(10 -2 0 1 1 20 30)
SYMBOL diode 544 272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 608 144 R0
SYMATTR InstName D4
SYMBOL voltage 624 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 4.3
SYMBOL diode 736 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL diode 800 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMBOL res 960 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10m
SYMBOL res 960 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 20m
SYMBOL voltage 432 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL bi 192 208 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B1
SYMATTR Value I=I(V4)
TEXT -152 8 Left 2 !.tran 0 10k 0
TEXT -216 488 Left 2 !.func vbatt(vsoc) (2.44544e-9*pwr(vsoc,5) - 6.00106e-7*pwr(vsoc,4) + 0.000060708*pwr(vsoc,3) - 0.00307689*pwr(vsoc,2) + 0.0774173*vsoc + 2.48387)
TEXT -352 -112 Left 6 ;RECHARGEABLE BATTERY
RECTANGLE Normal 1312 544 -352 -64 2
