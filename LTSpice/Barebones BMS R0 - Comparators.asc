Version 4
SHEET 1 1448 1232
WIRE 112 -368 96 -368
WIRE 96 -352 96 -368
WIRE 96 -352 -96 -352
WIRE 144 -352 96 -352
WIRE 240 -352 144 -352
WIRE 256 -352 240 -352
WIRE -96 -320 -96 -352
WIRE 240 -304 240 -352
WIRE 144 -240 144 -352
WIRE -96 -224 -96 -240
WIRE -96 -224 -144 -224
WIRE 112 -224 -96 -224
WIRE -96 -208 -96 -224
WIRE 240 -208 240 -224
WIRE 240 -208 176 -208
WIRE 112 -192 32 -192
WIRE -144 -176 -144 -224
WIRE -128 -176 -144 -176
WIRE 144 -160 144 -176
WIRE -96 -128 -96 -144
WIRE 32 -96 32 -192
WIRE 32 -96 -144 -96
WIRE -48 -64 -64 -64
WIRE -64 -16 -64 -64
WIRE -144 0 -144 -96
WIRE -96 0 -144 0
WIRE 32 16 32 -96
WIRE 32 16 -32 16
WIRE -96 32 -144 32
WIRE -64 80 -64 48
WIRE 0 112 -112 112
WIRE -112 128 -112 112
WIRE 0 128 0 112
WIRE -144 224 -144 32
WIRE -112 224 -112 208
WIRE -112 224 -144 224
WIRE 0 224 0 208
WIRE -112 240 -112 224
WIRE -112 336 -112 320
WIRE -80 400 -96 400
WIRE 448 400 432 400
WIRE 160 416 160 400
WIRE 288 416 160 416
WIRE 688 416 688 400
WIRE 816 416 688 416
WIRE -96 432 -96 400
WIRE 288 432 288 416
WIRE 432 432 432 400
WIRE 816 432 816 416
WIRE 16 480 -16 480
WIRE 240 480 96 480
WIRE 544 480 512 480
WIRE 768 480 624 480
WIRE 1008 496 976 496
WIRE 1120 496 1088 496
WIRE 1232 496 1120 496
WIRE 1328 496 1232 496
WIRE 1392 496 1328 496
WIRE 160 512 160 416
WIRE 688 512 688 416
WIRE -96 528 -96 512
WIRE -16 528 -16 480
WIRE -16 528 -96 528
WIRE 128 528 -16 528
WIRE 432 528 432 512
WIRE 512 528 512 480
WIRE 512 528 432 528
WIRE 656 528 512 528
WIRE 1120 528 1120 496
WIRE 240 544 240 480
WIRE 240 544 192 544
WIRE 288 544 288 512
WIRE 288 544 240 544
WIRE 320 544 288 544
WIRE 768 544 768 480
WIRE 768 544 720 544
WIRE 816 544 816 512
WIRE 816 544 768 544
WIRE -96 560 -96 528
WIRE 128 560 32 560
WIRE 432 560 432 528
WIRE 656 560 560 560
WIRE 160 592 160 576
WIRE 688 592 688 576
WIRE 32 608 32 560
WIRE 560 608 560 560
WIRE 1328 608 1328 496
WIRE 1232 624 1232 496
WIRE 1328 624 1328 608
WIRE -96 640 -96 624
WIRE 432 640 432 624
WIRE 1120 656 1120 608
WIRE 1200 656 1120 656
WIRE 1120 704 1120 656
WIRE 32 720 32 688
WIRE 560 720 560 688
WIRE 320 752 320 544
WIRE 816 752 816 544
WIRE 576 784 560 784
WIRE -128 800 -160 800
WIRE 1120 816 1120 784
WIRE 1232 816 1232 688
WIRE 1232 816 1120 816
WIRE 1328 816 1328 688
WIRE 1328 816 1232 816
WIRE -128 832 -128 800
WIRE 272 832 224 832
WIRE 400 832 368 832
WIRE 528 832 480 832
WIRE 576 832 576 784
WIRE 688 832 656 832
WIRE 768 832 752 832
WIRE 912 832 864 832
WIRE 1232 848 1232 816
WIRE 528 864 528 832
WIRE -128 944 -128 912
WIRE 528 976 528 928
WIRE 912 976 912 832
FLAG 688 592 0
FLAG -128 944 0
FLAG -160 800 VCC
FLAG 688 400 VCC
FLAG 560 720 0
FLAG 448 400 VCC
FLAG 432 640 0
FLAG 160 592 0
FLAG 160 400 VCC
FLAG 32 720 0
FLAG -80 400 VCC
FLAG -96 640 0
FLAG 224 832 VCC
FLAG 528 976 0
FLAG 320 544 VOUT
FLAG 560 784 VCC
FLAG 912 976 0
FLAG 976 496 VCC
FLAG 1392 496 V431
FLAG 1232 848 0
FLAG -64 80 0
FLAG -48 -64 VCC
FLAG -96 -128 0
FLAG 0 224 0
FLAG 144 -160 0
FLAG 112 -368 VCC
FLAG -112 336 0
SYMBOL voltage -128 816 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4.2
SYMBOL voltage 560 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(2.5 2.5 500)
SYMBOL res 800 416 R0
SYMATTR InstName R1
SYMATTR Value 220
SYMBOL res 416 416 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL Comparator\\lm393 688 544 R0
SYMATTR InstName U2
SYMBOL res 640 464 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 50k
SYMBOL voltage 32 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(2.5 2.5 500)
SYMBOL res 272 416 R0
SYMATTR InstName R4
SYMATTR Value 220
SYMBOL res -112 416 R0
SYMATTR InstName R5
SYMATTR Value 500
SYMBOL Comparator\\lm393 160 544 R0
SYMATTR InstName U4
SYMBOL res 112 464 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50k
SYMBOL EXTRA\\DIODES.COM\\ZENER\\1N4731A -80 624 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName U5
SYMBOL EXTRA\\DIODES.COM\\ZENER\\1N4728A 448 624 R180
WINDOW 0 24 72 Left 0
WINDOW 3 24 0 Left 0
SYMATTR InstName U3
SYMBOL diode 512 864 R0
SYMATTR InstName LED
SYMATTR Value 1N914
SYMATTR Description Light Emitting Diode
SYMATTR Type led
SYMBOL EXTRA\\IRF\\PMOSFET\\irf4905 320 832 M90
SYMATTR InstName U6
SYMBOL res 384 848 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 220
SYMBOL EXTRA\\IRF\\NMOSFET\\irfz44n 816 800 R90
SYMATTR InstName U7
SYMBOL diode 688 848 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName LED1
SYMATTR Value 1N914
SYMATTR Description Light Emitting Diode
SYMATTR Type led
SYMBOL res 560 848 R270
WINDOW 0 27 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 220
SYMBOL EXTRA\\VolReg\\TL431 1216 624 R0
SYMATTR InstName U1
SYMBOL res 1104 512 R0
SYMATTR InstName R9
SYMATTR Value 500
SYMBOL res 1104 688 R0
SYMATTR InstName R10
SYMATTR Value 500
SYMBOL cap 1312 624 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 1104 480 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 27 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL OpAmp\\LM358 -64 16 R0
SYMATTR InstName U8
SYMBOL EXTRA\\VolReg\\TL431 -112 -208 R0
SYMATTR InstName U9
SYMBOL Comparator\\lm393 144 -208 R0
SYMATTR InstName U10
SYMBOL voltage 0 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(3 3 500)
SYMBOL res 224 -320 R0
SYMATTR InstName R12
SYMATTR Value 220
SYMBOL res -128 112 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res -128 224 R0
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res -112 -336 R0
SYMATTR InstName R15
SYMATTR Value 1k
TEXT -80 752 Left 2 !.tran 20m
